[{"title": "一份来自 StackOverflow 的最佳 Python 装饰器教程", "url_object_id": "d924139977c8322137adab9e98b3d667", "url": "http://blog.jobbole.com/114694/", "create_date": "2019/04/21", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2012/02/python-logo.png"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 1, "tags": "IT技术,Python", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/q3057027161\">可乐</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://gist.github.com/Zearin/2f40b7b9cfc51132851a\">Zearin</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><p><em><strong>注意：</strong> 这是一篇 StackOverflow 上的问题回答，因为这个回答很棒，所以我把它存档了</em></p>\n<hr>\n<h1>问: 怎样在 Python 中连续使用多个函数装饰器？</h1>\n<hr>\n<p>如果你不想看详细的解释，你可以看 <a href=\"http://stackoverflow.com/questions/739654/understanding-python-decorators#answer-739665\">Paolo Bergantino 的回答</a></p>\n<h1>装饰器基础</h1>\n<h2>Python 的装饰器都是对象</h2>\n<p>为了理解装饰器，你首先必须知道 Python 中的函数都是 object 对象。 这非常重要。让我们通过一个例子来看看原因。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f1d145003152\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef shout(word='yes'):\r\n    return word.capitalize() + '!'\r\n\r\nprint shout()\r\n# outputs : 'Yes!'\r\n\r\n# 作为一个 object 对象，你可以把一个函数分配给一个变量，就像是\r\n# 其他 object 对象一样\r\n\r\nscream = shout\r\n\r\n\r\n# 请注意我们并没有使用括号：因此我们没有调用函数，我们只是把函数 `shout` 赋值给变量 `scream`\r\n# 这意味着我们可以通过 `scream` 调用 `shout` 函数\r\n\r\nprint scream()\r\n# outputs : 'Yes!'\r\n\r\n\r\n# 除了这些，这还意味着你可以移除旧的函数名 `shout`,\r\n# 之后依然可以通过 `scream` 访问函数\r\n\r\ndel shout\r\ntry:\r\n    print shout()\r\nexcept NameError as e:\r\n    print e\r\n    #outputs: \"name 'shout' is not defined\"\r\n\r\nprint scream()\r\n# outputs: 'Yes!'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f1d145003152-31\">31</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f1d145003152-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">word</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'yes'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f1d145003152-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">word</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">capitalize</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'!'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f1d145003152-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f1d145003152-4\"><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f1d145003152-5\"><span class=\"crayon-c\"># outputs : 'Yes!'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f1d145003152-6\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f1d145003152-7\"><span class=\"crayon-c\"># 作为一个 object 对象，你可以把一个函数分配给一个变量，就像是</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f1d145003152-8\"><span class=\"crayon-c\"># 其他 object 对象一样</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f1d145003152-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f1d145003152-10\"><span class=\"crayon-v\">scream</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shout</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f1d145003152-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f1d145003152-12\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f1d145003152-13\"><span class=\"crayon-c\"># 请注意我们并没有使用括号：因此我们没有调用函数，我们只是把函数 `shout` 赋值给变量 `scream`</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f1d145003152-14\"><span class=\"crayon-c\"># 这意味着我们可以通过 `scream` 调用 `shout` 函数</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f1d145003152-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f1d145003152-16\"><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">scream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f1d145003152-17\"><span class=\"crayon-c\"># outputs : 'Yes!'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f1d145003152-18\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f1d145003152-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f1d145003152-20\"><span class=\"crayon-c\"># 除了这些，这还意味着你可以移除旧的函数名 `shout`,</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f1d145003152-21\"><span class=\"crayon-c\"># 之后依然可以通过 `scream` 访问函数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f1d145003152-22\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f1d145003152-23\"><span class=\"crayon-r\">del</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shout</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f1d145003152-24\"><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f1d145003152-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f1d145003152-26\"><span class=\"crayon-st\">except</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">NameError</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f1d145003152-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f1d145003152-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">#outputs: \"name 'shout' is not defined\"</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f1d145003152-29\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f1d145003152-30\"><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">scream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f1d145003152-31\"><span class=\"crayon-c\"># outputs: 'Yes!'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>记住上面的内容，一会我们还会用得到。</p>\n<p>Python 函数另一个有趣的性质在于它们可以。。。在另一个函数内部定义！</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f27277356615\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef talk():\r\n    # 你可以在 `talk` 函数临时定义一个函数\r\n    def whisper(word='yes'):\r\n        return word.lower() + '...'\r\n\r\n    # ... 之后直接使用这个函数\r\n\r\n    print whisper()\r\n\r\n\r\n# 你可以调用 `talk` 函数，每次调用这个函数都会定义 `whisper` 函数，并且\r\n# 在 `talk` 函数中调用 `whisper` 函数\r\n\r\ntalk()\r\n# outputs: \r\n# \"yes...\"\r\n\r\n# 但是 `whisper` 函数在 `talk` 函数外部并不存在： \r\n\r\ntry:\r\n    print whisper()\r\nexcept NameError as e:\r\n    print e\r\n    #outputs : \"name 'whisper' is not defined\"*\r\n    #Python's functions are objects</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f27277356615-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f27277356615-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f27277356615-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f27277356615-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f27277356615-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f27277356615-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f27277356615-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f27277356615-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f27277356615-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f27277356615-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f27277356615-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f27277356615-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f27277356615-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f27277356615-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f27277356615-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f27277356615-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f27277356615-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f27277356615-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f27277356615-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f27277356615-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f27277356615-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f27277356615-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f27277356615-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f27277356615-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f27277356615-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f27277356615-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">talk</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f27277356615-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 你可以在 `talk` 函数临时定义一个函数</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f27277356615-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">whisper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">word</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'yes'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f27277356615-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">word</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">lower</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'...'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f27277356615-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f27277356615-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># ... 之后直接使用这个函数</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f27277356615-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f27277356615-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">whisper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f27277356615-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f27277356615-10\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f27277356615-11\"><span class=\"crayon-c\"># 你可以调用 `talk` 函数，每次调用这个函数都会定义 `whisper` 函数，并且</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f27277356615-12\"><span class=\"crayon-c\"># 在 `talk` 函数中调用 `whisper` 函数</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f27277356615-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f27277356615-14\"><span class=\"crayon-e\">talk</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f27277356615-15\"><span class=\"crayon-c\"># outputs: </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f27277356615-16\"><span class=\"crayon-c\"># \"yes...\"</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f27277356615-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f27277356615-18\"><span class=\"crayon-c\"># 但是 `whisper` 函数在 `talk` 函数外部并不存在： </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f27277356615-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f27277356615-20\"><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f27277356615-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">whisper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f27277356615-22\"><span class=\"crayon-st\">except</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">NameError</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f27277356615-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f27277356615-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">#outputs : \"name 'whisper' is not defined\"*</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f27277356615-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">#Python's functions are objects</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p></p>\n<h2>函数引用</h2>\n<p>现在是比较有趣的部分。。。</p>\n<p>你已经知道了函数是 object 对象。此外，函数还：</p>\n<ul>\n<li>可以像变量一样赋值</li>\n<li>可以在另一个函数内部定义</li>\n</ul>\n<p>这表示 <strong>函数可以 <code>return</code> 另一个函数</strong>。看下面吧！☺</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f2c744594171\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef getTalk(kind='shout'):\r\n\r\n    # 我们临时定义一个函数\r\n    def shout(word='yes'):\r\n        return word.capitalize() + '!'\r\n\r\n    def whisper(word='yes'):\r\n        return word.lower() + '...'\r\n\r\n    # 然后我们返回上面两个函数中的一个\r\n    if kind == 'shout':\r\n        # 我们并没有使用 '()' 。因此我们并没有调用函数； \r\n        # 相反，我们返回了函数对象  \r\n        return shout  \r\n    else:\r\n        return whisper\r\n\r\n\r\n# 你该怎样使用这个奇怪的功能呢？  \r\n\r\n\r\n# 调用这个函数，然后把结果赋值给一个变量 \r\ntalk = getTalk()      \r\n\r\n# 你可以看到 `talk` 是一个函数对象：  \r\nprint talk\r\n#outputs : &lt;function shout at 0xb7ea817c&gt;\r\n\r\n# The object is the one returned by the function:  \r\n# 这个对象是由一个函数返回的\r\nprint talk()\r\n#outputs : Yes!\r\n\r\n\r\n# 如果你觉得奇怪的话，你甚至可以直接使用它\r\nprint getTalk('whisper')()\r\n#outputs : yes...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f2c744594171-37\">37</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getTalk</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">kind</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'shout'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-2\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 我们临时定义一个函数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">word</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'yes'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">word</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">capitalize</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'!'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-6\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">whisper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">word</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'yes'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">word</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">lower</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'...'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 然后我们返回上面两个函数中的一个</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kind</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'shout'</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># 我们并没有使用 '()' 。因此我们并没有调用函数； </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># 相反，我们返回了函数对象  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">shout  </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-15\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">whisper</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-18\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-19\"><span class=\"crayon-c\"># 你该怎样使用这个奇怪的功能呢？  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-20\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-22\"><span class=\"crayon-c\"># 调用这个函数，然后把结果赋值给一个变量 </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-23\"><span class=\"crayon-v\">talk</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getTalk</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">      </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-24\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-25\"><span class=\"crayon-c\"># 你可以看到 `talk` 是一个函数对象：  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-26\"><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">talk</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-27\"><span class=\"crayon-c\">#outputs : &lt;function shout at 0xb7ea817c&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-28\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-29\"><span class=\"crayon-c\"># The object is the one returned by the function:  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-30\"><span class=\"crayon-c\"># 这个对象是由一个函数返回的</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-31\"><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">talk</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-32\"><span class=\"crayon-c\">#outputs : Yes!</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-33\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-34\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-35\"><span class=\"crayon-c\"># 如果你觉得奇怪的话，你甚至可以直接使用它</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f2c744594171-36\"><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getTalk</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'whisper'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f2c744594171-37\"><span class=\"crayon-c\">#outputs : yes...</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p>但等等…还有一些内容！</p>\n<p>如果你可以 <code>return</code> 一个函数，那么你也可以把函数当作参数传递：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f30844322796\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef doSomethingBefore(func): \r\n    print 'I do something before then I call the function you gave me'\r\n    print func()\r\n\r\ndoSomethingBefore(scream)\r\n#outputs: \r\n#I do something before then I call the function you gave me  \r\n#Yes!</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f30844322796-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f30844322796-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f30844322796-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f30844322796-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f30844322796-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f30844322796-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f30844322796-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f30844322796-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f30844322796-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">doSomethingBefore</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f30844322796-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I do something before then I call the function you gave me'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f30844322796-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">func</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f30844322796-4\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f30844322796-5\"><span class=\"crayon-e\">doSomethingBefore</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">scream</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f30844322796-6\"><span class=\"crayon-c\">#outputs: </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f30844322796-7\"><span class=\"crayon-c\">#I do something before then I call the function you gave me  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f30844322796-8\"><span class=\"crayon-c\">#Yes!</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>好，你已经掌握了装饰器所需的全部知识。正如你所见，装饰器是“包装器”，也就是说 <strong>它们允许你在它们装饰的函数的前面和后面运行其他代码</strong> ，而不必修改函数本身。</p>\n<h2>动手制作装饰器</h2>\n<p>你应该怎样动手制作：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f33634970334\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 装饰器是把其他函数作为参数的函数\r\ndef my_shiny_new_decorator(a_function_to_decorate):\r\n\r\n    # 在装饰器内部，装饰器临时创建了一个函数： 包装器。\r\n    # 这个函数把原来的函数包装起来\r\n    # 因此它可以在原函数的前面和后面执行其他代码。  \r\n    def the_wrapper_around_the_original_function():\r\n        # 把你想在原函数被调用前执行的代码写在这里\r\n        print 'Before the function runs'\r\n\r\n        # 在这里调用原函数（使用括号）\r\n        a_function_to_decorate()\r\n\r\n        # 把你想在原函数调用后执行的代码写在这里\r\n        print 'After the function runs'\r\n\r\n    # 到目前为止，`a_function_to_decorate` 还从未执行过。\r\n    # 我们返回刚刚创建的包装器\r\n    # 包装器中包含了原函数和在原函数之前/之后执行的代码。现在已经可以使用了！  \r\n    return the_wrapper_around_the_original_function\r\n\r\n# 现在想象一下你创建了一个函数，你不想再改动它了。   \r\ndef a_stand_alone_function():\r\n    print 'I am a stand alone function, don’t you dare modify me'\r\n\r\na_stand_alone_function() \r\n#outputs: I am a stand alone function, don't you dare modify me  \r\n\r\n# 好的，你可以装饰这个函数来扩展它的功能\r\n# 只需要把它传递给装饰器，之后就会动态地包装在你需要的任何代码中，然后返回一个满足你需求的新函数：   \r\n\r\na_stand_alone_function_decorated = my_shiny_new_decorator(a_stand_alone_function)\r\na_stand_alone_function_decorated()\r\n#outputs:\r\n#Before the function runs\r\n#I am a stand alone function, don't you dare modify me\r\n#After the function runs</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f33634970334-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f33634970334-37\">37</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-1\"><span class=\"crayon-c\"># 装饰器是把其他函数作为参数的函数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-2\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">my_shiny_new_decorator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a_function_to_decorate</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 在装饰器内部，装饰器临时创建了一个函数： 包装器。</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 这个函数把原来的函数包装起来</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 因此它可以在原函数的前面和后面执行其他代码。  </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">the_wrapper_around_the_original_function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># 把你想在原函数被调用前执行的代码写在这里</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Before the function runs'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-10\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># 在这里调用原函数（使用括号）</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">a_function_to_decorate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># 把你想在原函数调用后执行的代码写在这里</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'After the function runs'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-16\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 到目前为止，`a_function_to_decorate` 还从未执行过。</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 我们返回刚刚创建的包装器</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 包装器中包含了原函数和在原函数之前/之后执行的代码。现在已经可以使用了！  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">the_wrapper_around_the_original_function</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-22\"><span class=\"crayon-c\"># 现在想象一下你创建了一个函数，你不想再改动它了。   </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-23\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">a_stand_alone_function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I am a stand alone function, don’t you dare modify me'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-26\"><span class=\"crayon-e\">a_stand_alone_function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-27\"><span class=\"crayon-c\">#outputs: I am a stand alone function, don't you dare modify me  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-28\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-29\"><span class=\"crayon-c\"># 好的，你可以装饰这个函数来扩展它的功能</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-30\"><span class=\"crayon-c\"># 只需要把它传递给装饰器，之后就会动态地包装在你需要的任何代码中，然后返回一个满足你需求的新函数：   </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-31\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-32\"><span class=\"crayon-v\">a_stand_alone_function_decorated</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">my_shiny_new_decorator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a_stand_alone_function</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-33\"><span class=\"crayon-e\">a_stand_alone_function_decorated</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-34\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-35\"><span class=\"crayon-c\">#Before the function runs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f33634970334-36\"><span class=\"crayon-c\">#I am a stand alone function, don't you dare modify me</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f33634970334-37\"><span class=\"crayon-c\">#After the function runs</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p>现在，你希望每次你调用 <code>a_stand_alone_function</code> 的时候，实际上 <code>a_stand_alone_function_decorated</code> 会被调用。也就是说，这只是用 <code>my_shiny_new_decorator</code> 返回的函数重写了 <code>a_stand_alone_function</code> 函数：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f38014515450\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\na_stand_alone_function = my_shiny_new_decorator(a_stand_alone_function)\r\na_stand_alone_function()\r\n#outputs:\r\n#Before the function runs\r\n#I am a stand alone function, don’t you dare modify me\r\n#After the function runs\r\n\r\n# 你猜怎样着？这实际上就是装饰器的原理！</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f38014515450-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f38014515450-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f38014515450-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f38014515450-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f38014515450-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f38014515450-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f38014515450-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f38014515450-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f38014515450-1\"><span class=\"crayon-v\">a_stand_alone_function</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">my_shiny_new_decorator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a_stand_alone_function</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f38014515450-2\"><span class=\"crayon-e\">a_stand_alone_function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f38014515450-3\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f38014515450-4\"><span class=\"crayon-c\">#Before the function runs</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f38014515450-5\"><span class=\"crayon-c\">#I am a stand alone function, don’t you dare modify me</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f38014515450-6\"><span class=\"crayon-c\">#After the function runs</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f38014515450-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f38014515450-8\"><span class=\"crayon-c\"># 你猜怎样着？这实际上就是装饰器的原理！</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h2>装饰器解密</h2>\n<p>和前面相同的例子，但是使用了装饰器语法：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f3c528516713\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@my_shiny_new_decorator\r\ndef another_stand_alone_function():\r\n    print 'Leave me alone'\r\n\r\nanother_stand_alone_function()  \r\n#outputs:  \r\n#Before the function runs\r\n#Leave me alone\r\n#After the function runs</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f3c528516713-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f3c528516713-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f3c528516713-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f3c528516713-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f3c528516713-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f3c528516713-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f3c528516713-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f3c528516713-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f3c528516713-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f3c528516713-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">my_shiny_new_decorator</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f3c528516713-2\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">another_stand_alone_function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f3c528516713-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Leave me alone'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f3c528516713-4\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f3c528516713-5\"><span class=\"crayon-e\">another_stand_alone_function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f3c528516713-6\"><span class=\"crayon-c\">#outputs:  </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f3c528516713-7\"><span class=\"crayon-c\">#Before the function runs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f3c528516713-8\"><span class=\"crayon-c\">#Leave me alone</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f3c528516713-9\"><span class=\"crayon-c\">#After the function runs</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>就是这样，装饰器就是这么简单。 <code>@decorator</code> 只是下面形式的简写：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f3f645188939\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nanother_stand_alone_function = my_shiny_new_decorator(another_stand_alone_function)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f3f645188939-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f3f645188939-1\"><span class=\"crayon-v\">another_stand_alone_function</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">my_shiny_new_decorator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">another_stand_alone_function</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>装饰器只是一个 pythonic 的<a href=\"http://en.wikipedia.org/wiki/Decorator_pattern\">装饰器设计模式</a>的变种。Python 中内置了许多种传统的设计模式来简化开发过程（例如迭代器）。</p>\n<p>当然，你可以叠加多个装饰器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f43393387943\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef bread(func):\r\n    def wrapper():\r\n        print \"&lt;/''''''\\&gt;\"\r\n        func()\r\n        print \"&lt;\\______/&gt;\"\r\n    return wrapper\r\n\r\ndef ingredients(func):\r\n    def wrapper():\r\n        print '#tomatoes#'\r\n        func()\r\n        print '~salad~'\r\n    return wrapper\r\n\r\ndef sandwich(food='--ham--'):\r\n    print food\r\n\r\nsandwich()\r\n#outputs: --ham--\r\nsandwich = bread(ingredients(sandwich))\r\nsandwich()\r\n#outputs:\r\n#&lt;/''''''\\&gt;\r\n# #tomatoes#\r\n# --ham--\r\n# ~salad~\r\n#&lt;\\______/&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f43393387943-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f43393387943-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f43393387943-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f43393387943-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f43393387943-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f43393387943-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f43393387943-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f43393387943-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f43393387943-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f43393387943-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f43393387943-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f43393387943-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f43393387943-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f43393387943-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f43393387943-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f43393387943-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f43393387943-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f43393387943-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f43393387943-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f43393387943-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f43393387943-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f43393387943-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f43393387943-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f43393387943-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f43393387943-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f43393387943-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f43393387943-27\">27</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f43393387943-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f43393387943-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f43393387943-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&lt;/''''''\\&gt;\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f43393387943-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">func</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f43393387943-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"&lt;\\______/&gt;\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f43393387943-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f43393387943-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f43393387943-8\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ingredients</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f43393387943-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f43393387943-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'#tomatoes#'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f43393387943-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">func</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f43393387943-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'~salad~'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f43393387943-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f43393387943-14\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f43393387943-15\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sandwich</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">food</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'--ham--'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f43393387943-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">food</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f43393387943-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f43393387943-18\"><span class=\"crayon-e\">sandwich</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f43393387943-19\"><span class=\"crayon-c\">#outputs: --ham--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f43393387943-20\"><span class=\"crayon-v\">sandwich</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bread</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">ingredients</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sandwich</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f43393387943-21\"><span class=\"crayon-e\">sandwich</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f43393387943-22\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f43393387943-23\"><span class=\"crayon-c\">#&lt;/''''''\\&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f43393387943-24\"><span class=\"crayon-c\"># #tomatoes#</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f43393387943-25\"><span class=\"crayon-c\"># --ham--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f43393387943-26\"><span class=\"crayon-c\"># ~salad~</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f43393387943-27\"><span class=\"crayon-c\">#&lt;\\______/&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p>使用 Python 的装饰器语法：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f46297052997\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&lt;a href=\"http://www.jobbole.com/members/bread\"&gt;@bread&lt;/a&gt;\r\n@ingredients\r\ndef sandwich(food='--ham--'):\r\n    print food\r\n\r\nsandwich()\r\n#outputs:\r\n#&lt;/''''''\\&gt;\r\n# #tomatoes#\r\n# --ham--\r\n# ~salad~\r\n#&lt;\\______/&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f46297052997-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f46297052997-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f46297052997-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f46297052997-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f46297052997-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f46297052997-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f46297052997-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f46297052997-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f46297052997-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f46297052997-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f46297052997-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f46297052997-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f46297052997-1\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://www.jobbole.com/members/bread\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">bread</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f46297052997-2\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">ingredients</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f46297052997-3\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sandwich</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">food</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'--ham--'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f46297052997-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">food</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f46297052997-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f46297052997-6\"><span class=\"crayon-e\">sandwich</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f46297052997-7\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f46297052997-8\"><span class=\"crayon-c\">#&lt;/''''''\\&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f46297052997-9\"><span class=\"crayon-c\"># #tomatoes#</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f46297052997-10\"><span class=\"crayon-c\"># --ham--</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f46297052997-11\"><span class=\"crayon-c\"># ~salad~</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f46297052997-12\"><span class=\"crayon-c\">#&lt;\\______/&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>你设置装饰器的顺序很重要：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f49885270816\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@ingredients\r\n&lt;a href=\"http://www.jobbole.com/members/bread\"&gt;@bread&lt;/a&gt;\r\ndef strange_sandwich(food='--ham--'):\r\n    print food\r\n\r\nstrange_sandwich()\r\n#outputs:\r\n##tomatoes#\r\n#&lt;/''''''\\&gt;\r\n# --ham--\r\n#&lt;\\______/&gt;\r\n# ~salad~</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f49885270816-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f49885270816-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f49885270816-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f49885270816-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f49885270816-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f49885270816-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f49885270816-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f49885270816-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f49885270816-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f49885270816-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f49885270816-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f49885270816-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f49885270816-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">ingredients</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f49885270816-2\"><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"http://www.jobbole.com/members/bread\"</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">bread</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f49885270816-3\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">strange_sandwich</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">food</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'--ham--'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f49885270816-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">food</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f49885270816-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f49885270816-6\"><span class=\"crayon-e\">strange_sandwich</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f49885270816-7\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f49885270816-8\"><span class=\"crayon-c\">##tomatoes#</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f49885270816-9\"><span class=\"crayon-c\">#&lt;/''''''\\&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f49885270816-10\"><span class=\"crayon-c\"># --ham--</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f49885270816-11\"><span class=\"crayon-c\">#&lt;\\______/&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f49885270816-12\"><span class=\"crayon-c\"># ~salad~</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<hr>\n<h1>现在：是时候回答问题了。。。</h1>\n<p>现在你很容易就知道怎样回答这个问题了：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f4d658216866\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 生成粗体(bold)的装饰器\r\ndef makebold(fn):\r\n\r\n    # 装饰器返回的新函数\r\n    def wrapper():\r\n        # 在之前和之后插入其他代码\r\n        return '&lt;b&gt;' + fn() + '&lt;/b&gt;'\r\n    return wrapper\r\n\r\n# 生成斜体的装饰器\r\ndef makeitalic(fn):\r\n    # 装饰器返回的新函数\r\n    def wrapper():\r\n        # 在函数执行前后插入一些代码\r\n        return '&lt;i&gt;' + fn() + '&lt;/i&gt;'\r\n    return wrapper\r\n\r\n@makebold\r\n@makeitalic\r\ndef say():\r\n    return 'hello'\r\n\r\nprint say() \r\n#outputs: &lt;b&gt;&lt;i&gt;hello&lt;/i&gt;&lt;/b&gt;\r\n\r\n\r\n# 和上面完全等价的形式\r\ndef say():\r\n    return 'hello'\r\nsay = makebold(makeitalic(say))\r\n\r\nprint say() \r\n#outputs: &lt;b&gt;&lt;i&gt;hello&lt;/i&gt;&lt;/b&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f4d658216866-33\">33</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-1\"><span class=\"crayon-c\"># 生成粗体(bold)的装饰器</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f4d658216866-2\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">makebold</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fn</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f4d658216866-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 装饰器返回的新函数</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f4d658216866-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># 在之前和之后插入其他代码</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'&lt;b&gt;'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'&lt;/b&gt;'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f4d658216866-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wrapper</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f4d658216866-10\"><span class=\"crayon-c\"># 生成斜体的装饰器</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-11\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">makeitalic</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fn</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f4d658216866-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 装饰器返回的新函数</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f4d658216866-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># 在函数执行前后插入一些代码</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'&lt;i&gt;'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fn</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'&lt;/i&gt;'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f4d658216866-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">wrapper</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f4d658216866-18\"><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">makebold</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-19\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">makeitalic</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f4d658216866-20\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">say</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'hello'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f4d658216866-22\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-23\"><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">say</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f4d658216866-24\"><span class=\"crayon-c\">#outputs: &lt;b&gt;&lt;i&gt;hello&lt;/i&gt;&lt;/b&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f4d658216866-26\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-27\"><span class=\"crayon-c\"># 和上面完全等价的形式</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f4d658216866-28\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">say</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'hello'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f4d658216866-30\"><span class=\"crayon-v\">say</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">makebold</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">makeitalic</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">say</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-31\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f4d658216866-32\"><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">say</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f4d658216866-33\"><span class=\"crayon-c\">#outputs: &lt;b&gt;&lt;i&gt;hello&lt;/i&gt;&lt;/b&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p>现在你该放下轻松的心态，好好看看装饰器的高级使用方法了。</p>\n<hr>\n<h1>把装饰器传到下一层去</h1>\n<h2>把参数传递给被装饰的函数</h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f50683883307\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 这并不是黑魔法，你只是让包装器传递参数而已\r\n\r\ndef a_decorator_passing_arguments(function_to_decorate):\r\n    def a_wrapper_accepting_arguments(arg1, arg2):\r\n        print 'I got args! Look:', arg1, arg2\r\n        function_to_decorate(arg1, arg2)\r\n    return a_wrapper_accepting_arguments\r\n\r\n\r\n# 因为当你调用装饰器返回的函数时，实际上你在调用包装器，把参数传递给包装器，这也就完成了把参数传递给装饰器函数\r\n@a_decorator_passing_arguments\r\ndef print_full_name(first_name, last_name):\r\n    print 'My name is', first_name, last_name\r\n\r\nprint_full_name('Peter', 'Venkman')\r\n# outputs:\r\n#I got args! Look: Peter Venkman\r\n#My name is Peter Venkman</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f50683883307-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f50683883307-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f50683883307-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f50683883307-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f50683883307-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f50683883307-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f50683883307-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f50683883307-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f50683883307-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f50683883307-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f50683883307-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f50683883307-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f50683883307-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f50683883307-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f50683883307-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f50683883307-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f50683883307-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f50683883307-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f50683883307-1\"><span class=\"crayon-c\"># 这并不是黑魔法，你只是让包装器传递参数而已</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f50683883307-2\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f50683883307-3\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">a_decorator_passing_arguments</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">function_to_decorate</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f50683883307-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">a_wrapper_accepting_arguments</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arg2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f50683883307-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I got args! Look:'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">arg2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f50683883307-6\"><span class=\"crayon-e\">        </span><span class=\"crayon-e\">function_to_decorate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arg2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f50683883307-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a_wrapper_accepting_arguments</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f50683883307-8\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f50683883307-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f50683883307-10\"><span class=\"crayon-c\"># 因为当你调用装饰器返回的函数时，实际上你在调用包装器，把参数传递给包装器，这也就完成了把参数传递给装饰器函数</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f50683883307-11\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">a_decorator_passing_arguments</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f50683883307-12\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">print_full_name</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">first_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">last_name</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f50683883307-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'My name is'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">first_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">last_name</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f50683883307-14\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f50683883307-15\"><span class=\"crayon-e\">print_full_name</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Peter'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Venkman'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f50683883307-16\"><span class=\"crayon-c\"># outputs:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f50683883307-17\"><span class=\"crayon-c\">#I got args! Look: Peter Venkman</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f50683883307-18\"><span class=\"crayon-c\">#My name is Peter Venkman</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p></p>\n<h2>装饰器方法</h2>\n<p>关于 Python 的一个优点就是方法和函数本质本质上是一样的。二者唯一的区别就是方法的第一个参数是对当前对象的引用 (<code>self</code>)。</p>\n<p>这意味着你可以按照同样的方式为方法创建装饰器！只要记得考虑 <code>self</code> 就可以了：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f54446459884\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef method_friendly_decorator(method_to_decorate):\r\n    def wrapper(self, lie):\r\n        lie = lie - 3 # very friendly, decrease age even more :-)  \r\n        return method_to_decorate(self, lie)\r\n    return wrapper\r\n\r\n\r\nclass Lucy(object):\r\n    def __init__(self):\r\n        self.age = 32\r\n\r\n    @method_friendly_decorator\r\n    def sayYourAge(self, lie):\r\n        print 'I am {0}, what did you think?'.format(self.age + lie)\r\n\r\nl = Lucy()\r\nl.sayYourAge(-3)\r\n#outputs: I am 26, what did you think?</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f54446459884-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f54446459884-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f54446459884-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f54446459884-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f54446459884-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f54446459884-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f54446459884-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f54446459884-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f54446459884-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f54446459884-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f54446459884-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f54446459884-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f54446459884-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f54446459884-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f54446459884-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f54446459884-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f54446459884-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f54446459884-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f54446459884-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">method_friendly_decorator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">method_to_decorate</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f54446459884-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lie</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f54446459884-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">lie</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lie</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\"># very friendly, decrease age even more :-)  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f54446459884-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">method_to_decorate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lie</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f54446459884-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f54446459884-6\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f54446459884-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f54446459884-8\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Lucy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">object</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f54446459884-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f54446459884-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">age</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">32</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f54446459884-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f54446459884-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">method_friendly_decorator</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f54446459884-13\"><span class=\"crayon-e\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sayYourAge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lie</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f54446459884-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I am {0}, what did you think?'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">age</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lie</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f54446459884-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f54446459884-16\"><span class=\"crayon-v\">l</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Lucy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f54446459884-17\"><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sayYourAge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f54446459884-18\"><span class=\"crayon-c\">#outputs: I am 26, what did you think?</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p>如果你在创建通用的装饰器 — 一个适用于任何函数或者方法的装饰器，无论参数是什么 — 那么只要使用 <code>*args, **kwargs</code>就可以了:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f58264600734\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef a_decorator_passing_arbitrary_arguments(function_to_decorate):\r\n\r\n    # 包装器接受任何参数\r\n    def a_wrapper_accepting_arbitrary_arguments(*args, **kwargs):\r\n        print 'Do I have args?:'\r\n        print args\r\n        print kwargs\r\n\r\n        # 接下来解包参数，也就是这里的 *args, **kwargs\r\n        # 如果你不熟悉解包，可以浏览这个：\r\n        # http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/\r\n        function_to_decorate(*args, **kwargs)\r\n    return a_wrapper_accepting_arbitrary_arguments\r\n\r\n@a_decorator_passing_arbitrary_arguments\r\ndef function_with_no_argument():\r\n    print 'Python is cool, no argument here.'\r\n\r\nfunction_with_no_argument()\r\n#outputs\r\n#Do I have args?:\r\n#()\r\n#{}\r\n#Python is cool, no argument here.\r\n\r\n@a_decorator_passing_arbitrary_arguments\r\ndef function_with_arguments(a, b, c):\r\n    print a, b, c\r\n\r\nfunction_with_arguments(1,2,3)\r\n#outputs\r\n#Do I have args?:\r\n#(1, 2, 3)\r\n#{}\r\n#1 2 3 \r\n\r\n@a_decorator_passing_arbitrary_arguments\r\ndef function_with_named_arguments(a, b, c, platypus='Why not ?'):\r\n    print 'Do {0}, {1} and {2} like platypus? {3}'.format(\r\n    a, b, c, platypus)\r\n\r\nfunction_with_named_arguments('Bill', 'Linus', 'Steve', platypus='Indeed!')\r\n#outputs\r\n#Do I have args ? :\r\n#('Bill', 'Linus', 'Steve')\r\n#{'platypus': 'Indeed!'}\r\n#Do Bill, Linus and Steve like platypus? Indeed!\r\n\r\n\r\nclass Mary(object):\r\n    def __init__(self):\r\n        self.age = 31\r\n\r\n    @a_decorator_passing_arbitrary_arguments\r\n    def sayYourAge(self, lie=-3): #你可以在这里添加默认值\r\n        print 'I am {0}, what did you think?'.format(self.age + lie)\r\n\r\nm = Mary()\r\nm.sayYourAge()\r\n#outputs\r\n# Do I have args?:\r\n#(&lt;__main__.Mary object at 0xb7d303ac&gt;,)\r\n#{}\r\n#I am 28, what did you think?</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f58264600734-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f58264600734-64\">64</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">a_decorator_passing_arbitrary_arguments</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">function_to_decorate</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-2\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 包装器接受任何参数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">a_wrapper_accepting_arbitrary_arguments</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">kwargs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Do I have args?:'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">args</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-7\"><span class=\"crayon-e\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kwargs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-8\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># 接下来解包参数，也就是这里的 *args, **kwargs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># 如果你不熟悉解包，可以浏览这个：</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># http://www.saltycrane.com/blog/2008/01/how-to-use-args-and-kwargs-in-python/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">function_to_decorate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">kwargs</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a_wrapper_accepting_arbitrary</span><span class=\"crayon-sy\">_</span>arguments</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-14\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-15\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">a_decorator_passing_arbitrary_arguments</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-16\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">function_with_no_argument</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Python is cool, no argument here.'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-18\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-19\"><span class=\"crayon-e\">function_with_no_argument</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-20\"><span class=\"crayon-c\">#outputs</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-21\"><span class=\"crayon-c\">#Do I have args?:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-22\"><span class=\"crayon-c\">#()</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-23\"><span class=\"crayon-c\">#{}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-24\"><span class=\"crayon-c\">#Python is cool, no argument here.</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-26\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">a_decorator_passing_arbitrary_arguments</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-27\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">function_with_arguments</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-29\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-30\"><span class=\"crayon-e\">function_with_arguments</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-31\"><span class=\"crayon-c\">#outputs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-32\"><span class=\"crayon-c\">#Do I have args?:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-33\"><span class=\"crayon-c\">#(1, 2, 3)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-34\"><span class=\"crayon-c\">#{}</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-35\"><span class=\"crayon-c\">#1 2 3 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-36\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-37\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">a_decorator_passing_arbitrary_arguments</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-38\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">function_with_named_arguments</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">platypus</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'Why not ?'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Do {0}, {1} and {2} like platypus? {3}'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">format</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-40\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">platypus</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-41\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-42\"><span class=\"crayon-e\">function_with_named_arguments</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Bill'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Linus'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Steve'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">platypus</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'Indeed!'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-43\"><span class=\"crayon-c\">#outputs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-44\"><span class=\"crayon-c\">#Do I have args ? :</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-45\"><span class=\"crayon-c\">#('Bill', 'Linus', 'Steve')</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-46\"><span class=\"crayon-c\">#{'platypus': 'Indeed!'}</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-47\"><span class=\"crayon-c\">#Do Bill, Linus and Steve like platypus? Indeed!</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-48\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-49\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-50\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Mary</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">object</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-51\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__init__</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-52\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">age</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">31</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-53\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-54\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">a_decorator_passing_arbitrary_arguments</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-55\"><span class=\"crayon-e\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sayYourAge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lie</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">#你可以在这里添加默认值</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-56\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I am {0}, what did you think?'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">self</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">age</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lie</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-57\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-58\"><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Mary</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-59\"><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sayYourAge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-60\"><span class=\"crayon-c\">#outputs</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-61\"><span class=\"crayon-c\"># Do I have args?:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-62\"><span class=\"crayon-c\">#(&lt;__main__.Mary object at 0xb7d303ac&gt;,)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f58264600734-63\"><span class=\"crayon-c\">#{}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f58264600734-64\"><span class=\"crayon-c\">#I am 28, what did you think?</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0066 seconds] -->\r\n<p></p>\n<h2>把参数传递给装饰器</h2>\n<p>太棒了，现在你对于把参数传递给装饰器本身有什么看法呢？</p>\n<p>这可能有点奇怪，因为装饰器必须接收一个函数作为参数。因此，你可能无法直接把装饰器函数作为参数传递给另一个装饰器。</p>\n<p>在得到答案之前，让我们写一个小的例子：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f5c442125366\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 装饰器是普通函数\r\ndef my_decorator(func):\r\n    print 'I am an ordinary function'\r\n    def wrapper():\r\n        print 'I am function returned by the decorator'\r\n        func()\r\n    return wrapper\r\n\r\n\r\n# 因此你可以在没有任何 '@' 的情况下调用它\r\n\r\ndef lazy_function():\r\n    print 'zzzzzzzz'\r\n\r\ndecorated_function = my_decorator(lazy_function)\r\n#outputs: I am an ordinary function  \r\n\r\n\r\n# 上面的函数输出 'I am an ordinary function' ,因为这实际上就是我们直接调用函数的结果。没什么好奇怪的。  \r\n\r\n@my_decorator\r\ndef lazy_function():\r\n    print 'zzzzzzzz'\r\n\r\n#outputs: I am an ordinary function</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f5c442125366-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f5c442125366-1\"><span class=\"crayon-c\"># 装饰器是普通函数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f5c442125366-2\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">my_decorator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f5c442125366-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I am an ordinary function'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f5c442125366-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f5c442125366-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I am function returned by the decorator'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f5c442125366-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">func</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f5c442125366-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wrapper</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f5c442125366-8\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f5c442125366-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f5c442125366-10\"><span class=\"crayon-c\"># 因此你可以在没有任何 '@' 的情况下调用它</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f5c442125366-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f5c442125366-12\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">lazy_function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f5c442125366-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'zzzzzzzz'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f5c442125366-14\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f5c442125366-15\"><span class=\"crayon-v\">decorated_function</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">my_decorator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">lazy_function</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f5c442125366-16\"><span class=\"crayon-c\">#outputs: I am an ordinary function  </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f5c442125366-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f5c442125366-18\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f5c442125366-19\"><span class=\"crayon-c\"># 上面的函数输出 'I am an ordinary function' ,因为这实际上就是我们直接调用函数的结果。没什么好奇怪的。  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f5c442125366-20\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f5c442125366-21\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">my_decorator</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f5c442125366-22\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">lazy_function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f5c442125366-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'zzzzzzzz'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f5c442125366-24\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f5c442125366-25\"><span class=\"crayon-c\">#outputs: I am an ordinary function</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>结果是一模一样的：<code>my_decorator</code> 被调用了。因此当你使用 <code>@my_decorator</code> 时，Python 会调用 <em>“<code>my_decorator</code>” 变量所代表的函数</em>。</p>\n<p>这很重要！你提供的这个变量可以指向装饰器，<strong>也可以不指向</strong>。</p>\n<p>让我们增加点难度。 ☺</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f60086305790\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef decorator_maker():\r\n\r\n    print 'I make decorators! I am executed only once: '+\\\r\n          'when you make me create a decorator.'\r\n\r\n    def my_decorator(func):\r\n\r\n        print 'I am a decorator! I am executed only when you decorate a function.'\r\n\r\n        def wrapped():\r\n            print ('I am the wrapper around the decorated function. '\r\n                  'I am called when you call the decorated function. '\r\n                  'As the wrapper, I return the RESULT of the decorated function.')\r\n            return func()\r\n\r\n        print 'As the decorator, I return the wrapped function.'\r\n\r\n        return wrapped\r\n\r\n    print 'As a decorator maker, I return a decorator'\r\n    return my_decorator\r\n\r\n\r\n# 让我们创建一个装饰器。本质上是一个新函数  \r\nnew_decorator = decorator_maker()       \r\n#outputs:\r\n#I make decorators! I am executed only once: when you make me create a decorator.\r\n#As a decorator maker, I return a decorator\r\n\r\n# 然后我们装饰下面这个函数\r\n\r\ndef decorated_function():\r\n    print 'I am the decorated function.'\r\n\r\ndecorated_function = new_decorator(decorated_function)\r\n#outputs:\r\n#I am a decorator! I am executed only when you decorate a function.\r\n#As the decorator, I return the wrapped function\r\n\r\n\r\n# 调用这个函数\r\ndecorated_function()\r\n#outputs:\r\n#I am the wrapper around the decorated function. I am called when you call the decorated function.\r\n#As the wrapper, I return the RESULT of the decorated function.\r\n#I am the decorated function.</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f60086305790-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f60086305790-46\">46</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorator_maker</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-2\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I make decorators! I am executed only once: '</span><span class=\"crayon-o\">+</span><span class=\"crayon-sy\">\\</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-4\"><span class=\"crayon-h\">          </span><span class=\"crayon-s\">'when you make me create a decorator.'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">my_decorator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I am a decorator! I am executed only when you decorate a function.'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapped</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'I am the wrapper around the decorated function. '</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-12\"><span class=\"crayon-h\">                  </span><span class=\"crayon-s\">'I am called when you call the decorated function. '</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-13\"><span class=\"crayon-h\">                  </span><span class=\"crayon-s\">'As the wrapper, I return the RESULT of the decorated function.'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">func</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'As the decorator, I return the wrapped function.'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapped</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-20\"><span class=\"crayon-e\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'As a decorator maker, I return a decorator'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">my_decorator</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-22\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-24\"><span class=\"crayon-c\"># 让我们创建一个装饰器。本质上是一个新函数  </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-25\"><span class=\"crayon-v\">new_decorator</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorator_maker</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">       </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-26\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-27\"><span class=\"crayon-c\">#I make decorators! I am executed only once: when you make me create a decorator.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-28\"><span class=\"crayon-c\">#As a decorator maker, I return a decorator</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-29\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-30\"><span class=\"crayon-c\"># 然后我们装饰下面这个函数</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-31\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-32\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorated_function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I am the decorated function.'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-34\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-35\"><span class=\"crayon-v\">decorated_function</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">new_decorator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">decorated_function</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-36\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-37\"><span class=\"crayon-c\">#I am a decorator! I am executed only when you decorate a function.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-38\"><span class=\"crayon-c\">#As the decorator, I return the wrapped function</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-39\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-40\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-41\"><span class=\"crayon-c\"># 调用这个函数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-42\"><span class=\"crayon-e\">decorated_function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-43\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-44\"><span class=\"crayon-c\">#I am the wrapper around the decorated function. I am called when you call the decorated function.</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f60086305790-45\"><span class=\"crayon-c\">#As the wrapper, I return the RESULT of the decorated function.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f60086305790-46\"><span class=\"crayon-c\">#I am the decorated function.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0034 seconds] -->\r\n<p>没什么意料之外的事情发生。</p>\n<p>我们再做一次上面的事情，只不过这一次取消掉所有的中间变量：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f65119758979\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef decorated_function():\r\n    print 'I am the decorated function.'\r\ndecorated_function = decorator_maker()(decorated_function)\r\n#outputs:\r\n#I make decorators! I am executed only once: when you make me create a decorator.\r\n#As a decorator maker, I return a decorator\r\n#I am a decorator! I am executed only when you decorate a function.\r\n#As the decorator, I return the wrapped function.\r\n\r\n# 最后：  \r\ndecorated_function()    \r\n#outputs:\r\n#I am the wrapper around the decorated function. I am called when you call the decorated function.\r\n#As the wrapper, I return the RESULT of the decorated function.\r\n#I am the decorated function.</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f65119758979-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f65119758979-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f65119758979-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f65119758979-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f65119758979-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f65119758979-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f65119758979-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f65119758979-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f65119758979-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f65119758979-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f65119758979-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f65119758979-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f65119758979-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f65119758979-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f65119758979-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f65119758979-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorated_function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f65119758979-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I am the decorated function.'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f65119758979-3\"><span class=\"crayon-v\">decorated_function</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorator_maker</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">decorated_function</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f65119758979-4\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f65119758979-5\"><span class=\"crayon-c\">#I make decorators! I am executed only once: when you make me create a decorator.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f65119758979-6\"><span class=\"crayon-c\">#As a decorator maker, I return a decorator</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f65119758979-7\"><span class=\"crayon-c\">#I am a decorator! I am executed only when you decorate a function.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f65119758979-8\"><span class=\"crayon-c\">#As the decorator, I return the wrapped function.</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f65119758979-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f65119758979-10\"><span class=\"crayon-c\"># 最后：  </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f65119758979-11\"><span class=\"crayon-e\">decorated_function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f65119758979-12\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f65119758979-13\"><span class=\"crayon-c\">#I am the wrapper around the decorated function. I am called when you call the decorated function.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f65119758979-14\"><span class=\"crayon-c\">#As the wrapper, I return the RESULT of the decorated function.</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f65119758979-15\"><span class=\"crayon-c\">#I am the decorated function.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>让它<em>更短一下</em>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f6b790969012\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@decorator_maker()\r\ndef decorated_function():\r\n    print 'I am the decorated function.'\r\n#outputs:\r\n#I make decorators! I am executed only once: when you make me create a decorator.\r\n#As a decorator maker, I return a decorator\r\n#I am a decorator! I am executed only when you decorate a function.\r\n#As the decorator, I return the wrapped function.\r\n\r\n\r\n#最后： \r\ndecorated_function()    \r\n#outputs:\r\n#I am the wrapper around the decorated function. I am called when you call the decorated function.\r\n#As the wrapper, I return the RESULT of the decorated function.\r\n#I am the decorated function.</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6b790969012-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6b790969012-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6b790969012-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6b790969012-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6b790969012-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6b790969012-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6b790969012-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6b790969012-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6b790969012-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6b790969012-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6b790969012-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6b790969012-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6b790969012-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6b790969012-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6b790969012-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6b790969012-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6b790969012-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">decorator_maker</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6b790969012-2\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorated_function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6b790969012-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I am the decorated function.'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6b790969012-4\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6b790969012-5\"><span class=\"crayon-c\">#I make decorators! I am executed only once: when you make me create a decorator.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6b790969012-6\"><span class=\"crayon-c\">#As a decorator maker, I return a decorator</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6b790969012-7\"><span class=\"crayon-c\">#I am a decorator! I am executed only when you decorate a function.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6b790969012-8\"><span class=\"crayon-c\">#As the decorator, I return the wrapped function.</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6b790969012-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6b790969012-10\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6b790969012-11\"><span class=\"crayon-c\">#最后： </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6b790969012-12\"><span class=\"crayon-e\">decorated_function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6b790969012-13\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6b790969012-14\"><span class=\"crayon-c\">#I am the wrapper around the decorated function. I am called when you call the decorated function.</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6b790969012-15\"><span class=\"crayon-c\">#As the wrapper, I return the RESULT of the decorated function.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6b790969012-16\"><span class=\"crayon-c\">#I am the decorated function.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>你注意到了吗？我们调用了一个 <code>@</code> 语法的函数！ :-)</p>\n<p>所以，回到装饰器的参数上面来。如果我们可以使用函数生成一个临时的装饰器，我们也可以把参数传递给那个函数，对吗？</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f6f994147190\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef decorator_maker_with_arguments(decorator_arg1, decorator_arg2):\r\n    print 'I make decorators! And I accept arguments:', decorator_arg1, decorator_arg2\r\n    def my_decorator(func):\r\n        # 传递参数的能力来自于闭包\r\n        # 如果你不了解闭包，那也没关系，\r\n        # 或者你也可以阅读 http://stackoverflow.com/questions/13857/can-you-explain-closures-as-they-relate-to-python  \r\n        print 'I am the decorator. Somehow you passed me arguments:', decorator_arg1, decorator_arg2\r\n\r\n        # 不要混淆装饰器参数和函数参数！  \r\n        def wrapped(function_arg1, function_arg2):\r\n            print ('I am the wrapper around the decorated function.\\n'\r\n                  'I can access all the variables\\n'\r\n                  '\\t- from the decorator: {0} {1}\\n'\r\n                  '\\t- from the function call: {2} {3}\\n'\r\n                  'Then I can pass them to the decorated function'\r\n                  .format(decorator_arg1, decorator_arg2,\r\n                          function_arg1, function_arg2))\r\n            return func(function_arg1, function_arg2)\r\n\r\n        return wrapped\r\n\r\n    return my_decorator\r\n\r\n@decorator_maker_with_arguments('Leonard', 'Sheldon')\r\ndef decorated_function_with_arguments(function_arg1, function_arg2):\r\n    print ('I am the decorated function and only knows about my arguments: {0}'\r\n           ' {1}'.format(function_arg1, function_arg2))\r\n\r\ndecorated_function_with_arguments('Rajesh', 'Howard')\r\n#outputs:\r\n#I make decorators! And I accept arguments: Leonard Sheldon\r\n#I am the decorator. Somehow you passed me arguments: Leonard Sheldon\r\n#I am the wrapper around the decorated function. \r\n#I can access all the variables \r\n#    - from the decorator: Leonard Sheldon \r\n#    - from the function call: Rajesh Howard \r\n#Then I can pass them to the decorated function\r\n#I am the decorated function and only knows about my arguments: Rajesh Howard</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f6f994147190-38\">38</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorator_maker_with_arguments</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">decorator_arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">decorator_arg2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I make decorators! And I accept arguments:'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">decorator_arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorator_arg2</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-3\"><span class=\"crayon-e\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">my_decorator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># 传递参数的能力来自于闭包</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># 如果你不了解闭包，那也没关系，</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># 或者你也可以阅读 http://stackoverflow.com/questions/13857/can-you-explain-closures-as-they-relate-to-python  </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'I am the decorator. Somehow you passed me arguments:'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">decorator_arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">decorator_arg2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-8\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># 不要混淆装饰器参数和函数参数！  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapped</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">function_arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">function_arg2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'I am the wrapper around the decorated function.\\n'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-12\"><span class=\"crayon-h\">                  </span><span class=\"crayon-s\">'I can access all the variables\\n'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-13\"><span class=\"crayon-h\">                  </span><span class=\"crayon-s\">'\\t- from the decorator: {0} {1}\\n'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-14\"><span class=\"crayon-h\">                  </span><span class=\"crayon-s\">'\\t- from the function call: {2} {3}\\n'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-15\"><span class=\"crayon-h\">                  </span><span class=\"crayon-s\">'Then I can pass them to the decorated function'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-16\"><span class=\"crayon-h\">                  </span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">decorator_arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">decorator_arg2</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-17\"><span class=\"crayon-h\">                          </span><span class=\"crayon-v\">function_arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">function_arg2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">func</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">function_arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">function_arg2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapped</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-22\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">my</span><span class=\"crayon-sy\">_</span>decorator</div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-24\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">decorator_maker_with_arguments</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Leonard'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Sheldon'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-25\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorated_function_with_arguments</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">function_arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">function_arg2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-26\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'I am the decorated function and only knows about my arguments: {0}'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-27\"><span class=\"crayon-h\">           </span><span class=\"crayon-s\">' {1}'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">function_arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">function_arg2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-28\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-29\"><span class=\"crayon-e\">decorated_function_with_arguments</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Rajesh'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Howard'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-30\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-31\"><span class=\"crayon-c\">#I make decorators! And I accept arguments: Leonard Sheldon</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-32\"><span class=\"crayon-c\">#I am the decorator. Somehow you passed me arguments: Leonard Sheldon</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-33\"><span class=\"crayon-c\">#I am the wrapper around the decorated function. </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-34\"><span class=\"crayon-c\">#I can access all the variables </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-35\"><span class=\"crayon-c\">#    - from the decorator: Leonard Sheldon </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-36\"><span class=\"crayon-c\">#    - from the function call: Rajesh Howard </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f6f994147190-37\"><span class=\"crayon-c\">#Then I can pass them to the decorated function</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f6f994147190-38\"><span class=\"crayon-c\">#I am the decorated function and only knows about my arguments: Rajesh Howard</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0045 seconds] -->\r\n<p>最后得到的就是：带参数的装饰器。参数可以设置为变量：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f73892021808\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nc1 = 'Penny'\r\nc2 = 'Leslie'\r\n\r\n@decorator_maker_with_arguments('Leonard', c1)\r\ndef decorated_function_with_arguments(function_arg1, function_arg2):\r\n    print ('I am the decorated function and only knows about my arguments:'\r\n           ' {0} {1}'.format(function_arg1, function_arg2))\r\n\r\ndecorated_function_with_arguments(c2, 'Howard')\r\n#outputs:\r\n#I make decorators! And I accept arguments: Leonard Penny\r\n#I am the decorator. Somehow you passed me arguments: Leonard Penny\r\n#I am the wrapper around the decorated function. \r\n#I can access all the variables \r\n#    - from the decorator: Leonard Penny \r\n#    - from the function call: Leslie Howard \r\n#Then I can pass them to the decorated function\r\n#I am the decorated function and only knows about my arguments: Leslie Howard</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f73892021808-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f73892021808-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f73892021808-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f73892021808-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f73892021808-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f73892021808-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f73892021808-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f73892021808-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f73892021808-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f73892021808-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f73892021808-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f73892021808-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f73892021808-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f73892021808-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f73892021808-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f73892021808-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f73892021808-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f73892021808-18\">18</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f73892021808-1\"><span class=\"crayon-v\">c1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Penny'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f73892021808-2\"><span class=\"crayon-v\">c2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Leslie'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f73892021808-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f73892021808-4\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">decorator_maker_with_arguments</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Leonard'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f73892021808-5\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorated_function_with_arguments</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">function_arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">function_arg2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f73892021808-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'I am the decorated function and only knows about my arguments:'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f73892021808-7\"><span class=\"crayon-h\">           </span><span class=\"crayon-s\">' {0} {1}'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">function_arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">function_arg2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f73892021808-8\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f73892021808-9\"><span class=\"crayon-e\">decorated_function_with_arguments</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Howard'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f73892021808-10\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f73892021808-11\"><span class=\"crayon-c\">#I make decorators! And I accept arguments: Leonard Penny</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f73892021808-12\"><span class=\"crayon-c\">#I am the decorator. Somehow you passed me arguments: Leonard Penny</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f73892021808-13\"><span class=\"crayon-c\">#I am the wrapper around the decorated function. </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f73892021808-14\"><span class=\"crayon-c\">#I can access all the variables </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f73892021808-15\"><span class=\"crayon-c\">#    - from the decorator: Leonard Penny </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f73892021808-16\"><span class=\"crayon-c\">#    - from the function call: Leslie Howard </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f73892021808-17\"><span class=\"crayon-c\">#Then I can pass them to the decorated function</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f73892021808-18\"><span class=\"crayon-c\">#I am the decorated function and only knows about my arguments: Leslie Howard</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>如你所见，你可以使用这个技巧向装饰器传递参数，就像是向普通函数传递一样。如果你愿意的话，你甚至可以使用 <code>*args, **kwargs</code>。但记住，装饰器只会被调用<strong>一次</strong>。只在 Python 导入脚本的时候运行。在这之后你就无法动态设置参数了。当你执行 <code>import x</code> 之后，<strong>函数已经被装饰了</strong>,因此之后你无法改变任何东西。</p>\n<hr>\n<h1>练习： 装饰一个装饰器</h1>\n<p>好的，作为奖励，我会提供你一段代码允许装饰器接收任何参数。毕竟，为了接收参数，我们会用另一个函数创建装饰器。</p>\n<p>我们包装一下装饰器。</p>\n<p>我们最近看到的有包装函数的还有什么呢？</p>\n<p>对了，就是装饰器！</p>\n<p>让我们做点有趣的事，写一个装饰器的装饰器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f7a885660919\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef decorator_with_args(decorator_to_enhance):\r\n    \"\"\"\r\n    这个函数是被用作装饰器。\r\n    它会装饰其他函数，被装饰的函数也是一个装饰器。\r\n    喝杯咖啡吧。\r\n    它允许任何装饰器接收任意个参数，\r\n    这样你就不会为每次都要考虑怎样处理而头疼了\r\n    \"\"\"\r\n\r\n    # 我们使用同样的技巧来传递参数\r\n    def decorator_maker(*args, **kwargs):\r\n        # 我们创建一个仅可以接收一个函数的临时装饰器\r\n        # 但无法从 maker 传递参数 \r\n        def decorator_wrapper(func):\r\n            # 原装饰器返回的结果\r\n            # 其实只是一个普通函数（这个函数返回一个函数）。\r\n            # 唯一的陷阱是： 装饰器必须有特定的格式，否则无法运行：   \r\n            return decorator_to_enhance(func, *args, **kwargs)\r\n        return decorator_wrapper\r\n    return decorator_maker</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7a885660919-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7a885660919-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorator_with_args</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">decorator_to_enhance</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7a885660919-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7a885660919-3\"><span class=\"crayon-s\">    这个函数是被用作装饰器。</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7a885660919-4\"><span class=\"crayon-s\">    它会装饰其他函数，被装饰的函数也是一个装饰器。</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7a885660919-5\"><span class=\"crayon-s\">    喝杯咖啡吧。</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7a885660919-6\"><span class=\"crayon-s\">    它允许任何装饰器接收任意个参数，</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7a885660919-7\"><span class=\"crayon-s\">    这样你就不会为每次都要考虑怎样处理而头疼了</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7a885660919-8\"><span class=\"crayon-s\">    \"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7a885660919-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7a885660919-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 我们使用同样的技巧来传递参数</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7a885660919-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorator_maker</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">kwargs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7a885660919-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># 我们创建一个仅可以接收一个函数的临时装饰器</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7a885660919-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\"># 但无法从 maker 传递参数 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7a885660919-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorator_wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7a885660919-15\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\"># 原装饰器返回的结果</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7a885660919-16\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\"># 其实只是一个普通函数（这个函数返回一个函数）。</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7a885660919-17\"><span class=\"crayon-h\">            </span><span class=\"crayon-c\"># 唯一的陷阱是： 装饰器必须有特定的格式，否则无法运行：   </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7a885660919-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorator_to_enhance</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">kwargs</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7a885660919-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorator_wrapper</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7a885660919-20\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">decorator_maker</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p>可以像下面这样使用：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f7e006141985\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 创建一个用作装饰器的函数。然后加上一个装饰器  :-)  \r\n# 不要忘记，格式是  `decorator(func, *args, **kwargs)`  \r\n@decorator_with_args \r\ndef decorated_decorator(func, *args, **kwargs): \r\n    def wrapper(function_arg1, function_arg2):\r\n        print 'Decorated with', args, kwargs\r\n        return func(function_arg1, function_arg2)\r\n    return wrapper\r\n\r\n\r\n# 然后用全新的装饰器装饰你的函数。    \r\n\r\n@decorated_decorator(42, 404, 1024)\r\ndef decorated_function(function_arg1, function_arg2):\r\n    print 'Hello', function_arg1, function_arg2\r\n\r\ndecorated_function('Universe and', 'everything')\r\n#outputs:\r\n#Decorated with (42, 404, 1024) {}\r\n#Hello Universe and everything\r\n\r\n# Whoooot!</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f7e006141985-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7e006141985-1\"><span class=\"crayon-c\"># 创建一个用作装饰器的函数。然后加上一个装饰器  :-)  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7e006141985-2\"><span class=\"crayon-c\"># 不要忘记，格式是  `decorator(func, *args, **kwargs)`  </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7e006141985-3\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">decorator_with_args </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7e006141985-4\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorated_decorator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">kwargs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7e006141985-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">function_arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">function_arg2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7e006141985-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Decorated with'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">kwargs</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7e006141985-7\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">func</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">function_arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">function_arg2</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7e006141985-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wrapper</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7e006141985-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7e006141985-10\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7e006141985-11\"><span class=\"crayon-c\"># 然后用全新的装饰器装饰你的函数。    </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7e006141985-12\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7e006141985-13\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">decorated_decorator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">42</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">404</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1024</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7e006141985-14\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">decorated_function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">function_arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">function_arg2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7e006141985-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Hello'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">function_arg1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">function_arg2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7e006141985-16\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7e006141985-17\"><span class=\"crayon-e\">decorated_function</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Universe and'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'everything'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7e006141985-18\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7e006141985-19\"><span class=\"crayon-c\">#Decorated with (42, 404, 1024) {}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7e006141985-20\"><span class=\"crayon-c\">#Hello Universe and everything</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f7e006141985-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f7e006141985-22\"><span class=\"crayon-c\"># Whoooot!</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p>我知道，上次你有这种感觉，是在听一个人说：“在理解递归之前，你必须首先理解递归” 时。但现在，掌握了这个之后你不觉得很棒吗？</p>\n<hr>\n<h1>最佳实践： 装饰器</h1>\n<ul>\n<li>装饰器在 Python 2.4 引进，因此确保你的代码运行的 Python 版本 &gt;=2.4</li>\n<li>装饰器会拖慢函数调用速度。请牢记</li>\n<li><strong>你无法解除装饰一个函数。</strong> （确实 <em>有</em> 一些技巧可以创建允许解除装饰的装饰器，但是没人会使用它们。）因此一旦函数被装饰了，<em>所有这个函数的代码</em>就都装饰了。</li>\n<li>装饰器包装函数，会使得函数更难调试。 （从 Python &gt;=2.5 有所好转；看下文。）</li>\n</ul>\n<p><code>functools</code> 模块在 Python 2.5 引进。模块中包含了函数 <code>functools.wraps()</code> ，这个函数会把被装饰函数的名字，模块名，docstring 都复制到它的包装器中。</p>\n<p>（有趣的事情是： <code>functools.wraps()</code> 是个装饰器！☺）</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f82895235863\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# 至于调试，stacktrace 输出函数的 __name__\r\ndef foo():\r\n    print 'foo'\r\n\r\nprint foo.__name__\r\n#outputs: foo\r\n\r\n\r\n# 有了装饰器之后，有点混乱   \r\ndef bar(func):\r\n    def wrapper():\r\n        print 'bar'\r\n        return func()\r\n    return wrapper\r\n\r\n@bar\r\ndef foo():\r\n    print 'foo'\r\n\r\nprint foo.__name__\r\n#outputs: wrapper\r\n\r\n\r\n# `functools` 可以改善上面的情况\r\n\r\nimport functools\r\n\r\ndef bar(func):\r\n    # 我们认为 `wrapper` 正在包装 `func` \r\n    # 神奇的事情发生了 \r\n    @functools.wraps(func)\r\n    def wrapper():\r\n        print 'bar'\r\n        return func()\r\n    return wrapper\r\n\r\n@bar\r\ndef foo():\r\n    print 'foo'\r\n\r\nprint foo.__name__\r\n#outputs: foo</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f82895235863-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f82895235863-42\">42</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-1\"><span class=\"crayon-c\"># 至于调试，stacktrace 输出函数的 __name__</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-2\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'foo'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-4\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-5\"><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__name__</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-6\"><span class=\"crayon-c\">#outputs: foo</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-8\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-9\"><span class=\"crayon-c\"># 有了装饰器之后，有点混乱   </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-10\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'bar'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">func</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">wrapper</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-16\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">bar</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-17\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'foo'</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-20\"><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__name__</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-21\"><span class=\"crayon-c\">#outputs: wrapper</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-22\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-24\"><span class=\"crayon-c\"># `functools` 可以改善上面的情况</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-26\"><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">functools</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-27\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-28\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 我们认为 `wrapper` 正在包装 `func` </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\"># 神奇的事情发生了 </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-k \">functools</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">wraps</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-32\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'bar'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">func</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">wrapper</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-36\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-37\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">bar</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-38\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">foo</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'foo'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-40\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f82895235863-41\"><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__name__</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f82895235863-42\"><span class=\"crayon-c\">#outputs: foo</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p></p>\n<hr>\n<h1>怎样使装饰器变得有用？</h1>\n<p><strong>现在最大的问题是：</strong> 我可以用装饰器来干嘛？</p>\n<p>装饰器看起来很酷，很强大，但有一个实用的例子就更好了。大概有 1000 种可能的例子。常见的使用方法是扩展一个外部库函数（你无法修改）的行为，或者用来调试外部库函数（你不想修改它，因为它是临时函数）。</p>\n<p>你可以使用装饰器以 DRY(Don’t Repeat Yourself,不重复自己) 的方式扩展函数，就像这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f88161842040\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef benchmark(func):\r\n    \"\"\"\r\n    一个用来输出函数执行时间的装饰器\r\n    \"\"\"\r\n    import time\r\n    def wrapper(*args, **kwargs):\r\n        t = time.clock()\r\n        res = func(*args, **kwargs)\r\n        print func.__name__, time.clock()-t\r\n        return res\r\n    return wrapper\r\n\r\n\r\ndef logging(func):\r\n    \"\"\"\r\n    一个用来记录脚本活动的装饰器。\r\n    （实际上只是打印出来，但可以输出到日志！）\r\n    \"\"\"\r\n    def wrapper(*args, **kwargs):\r\n        res = func(*args, **kwargs)\r\n        print func.__name__, args, kwargs\r\n        return res\r\n    return wrapper\r\n\r\n\r\ndef counter(func):\r\n    \"\"\"\r\n    一个用来统计并输出函数执行次数的装饰器\r\n    \"\"\"\r\n    def wrapper(*args, **kwargs):\r\n        wrapper.count = wrapper.count + 1\r\n        res = func(*args, **kwargs)\r\n        print '{0} has been used: {1}x'.format(func.__name__, wrapper.count)\r\n        return res\r\n    wrapper.count = 0\r\n    return wrapper\r\n\r\n@counter\r\n@benchmark\r\n@logging\r\ndef reverse_string(string):\r\n    return str(reversed(string))\r\n\r\nprint reverse_string('Able was I ere I saw Elba')\r\nprint reverse_string('A man, a plan, a canoe, pasta, heros, rajahs, a coloratura, maps, snipe, percale, macaroni, a gag, a banana bag, a tan, a tag, a banana bag again (or a camel), a crepe, pins, Spam, a rut, a Rolo, cash, a jar, sore hats, a peon, a canal: Panama!')\r\n\r\n#outputs:\r\n#reverse_string ('Able was I ere I saw Elba',) {}\r\n#wrapper 0.0\r\n#wrapper has been used: 1x \r\n#ablE was I ere I saw elbA\r\n#reverse_string ('A man, a plan, a canoe, pasta, heros, rajahs, a coloratura, maps, snipe, percale, macaroni, a gag, a banana bag, a tan, a tag, a banana bag again (or a camel), a crepe, pins, Spam, a rut, a Rolo, cash, a jar, sore hats, a peon, a canal: Panama!',) {}\r\n#wrapper 0.0\r\n#wrapper has been used: 2x\r\n#!amanaP :lanac a ,noep a ,stah eros ,raj a ,hsac ,oloR a ,tur a ,mapS ,snip ,eperc a ,)lemac a ro( niaga gab ananab a ,gat a ,nat a ,gab ananab a ,gag a ,inoracam ,elacrep ,epins ,spam ,arutaroloc a ,shajar ,soreh ,atsap ,eonac a ,nalp a ,nam A</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f88161842040-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f88161842040-55\">55</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-1\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">benchmark</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-3\"><span class=\"crayon-s\">    一个用来输出函数执行时间的装饰器</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-4\"><span class=\"crayon-s\">    \"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">time</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">kwargs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">res</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">func</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">kwargs</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__name__</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">time</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">clock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">res</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-11\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-12\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-14\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">logging</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-16\"><span class=\"crayon-s\">    一个用来记录脚本活动的装饰器。</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-17\"><span class=\"crayon-s\">    （实际上只是打印出来，但可以输出到日志！）</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-18\"><span class=\"crayon-s\">    \"\"\"</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">kwargs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">res</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">func</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">kwargs</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__name__</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">kwargs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-22\"><span class=\"crayon-e\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">res</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-23\"><span class=\"crayon-e\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-24\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-26\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">counter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-s\">\"\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-28\"><span class=\"crayon-s\">    一个用来统计并输出函数执行次数的装饰器</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-29\"><span class=\"crayon-s\">    \"\"\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wrapper</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">kwargs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">wrapper</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">count</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wrapper</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">count</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">res</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">func</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">kwargs</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'{0} has been used: {1}x'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-k \">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">func</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">__name__</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wrapper</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">res</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-35\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">wrapper</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">count</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">wrapper</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-37\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-38\"><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">counter</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-39\"><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">benchmark</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-40\"><span class=\"crayon-sy\">@</span><span class=\"crayon-k \">logging</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-41\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">reverse_string</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">string</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-42\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">str</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">reversed</span><span class=\"crayon-sy\">(</span><span class=\"crayon-k \">string</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-43\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-44\"><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">reverse_string</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'Able was I ere I saw Elba'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-45\"><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">reverse_string</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'A man, a plan, a canoe, pasta, heros, rajahs, a coloratura, maps, snipe, percale, macaroni, a gag, a banana bag, a tan, a tag, a banana bag again (or a camel), a crepe, pins, Spam, a rut, a Rolo, cash, a jar, sore hats, a peon, a canal: Panama!'</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-46\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-47\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-48\"><span class=\"crayon-c\">#reverse_string ('Able was I ere I saw Elba',) {}</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-49\"><span class=\"crayon-c\">#wrapper 0.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-50\"><span class=\"crayon-c\">#wrapper has been used: 1x </span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-51\"><span class=\"crayon-c\">#ablE was I ere I saw elbA</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-52\"><span class=\"crayon-c\">#reverse_string ('A man, a plan, a canoe, pasta, heros, rajahs, a coloratura, maps, snipe, percale, macaroni, a gag, a banana bag, a tan, a tag, a banana bag again (or a camel), a crepe, pins, Spam, a rut, a Rolo, cash, a jar, sore hats, a peon, a canal: Panama!',) {}</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-53\"><span class=\"crayon-c\">#wrapper 0.0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f88161842040-54\"><span class=\"crayon-c\">#wrapper has been used: 2x</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f88161842040-55\"><span class=\"crayon-c\">#!amanaP :lanac a ,noep a ,stah eros ,raj a ,hsac ,oloR a ,tur a ,mapS ,snip ,eperc a ,)lemac a ro( niaga gab ananab a ,gat a ,nat a ,gab ananab a ,gag a ,inoracam ,elacrep ,epins ,spam ,arutaroloc a ,shajar ,soreh ,atsap ,eonac a ,nalp a ,nam A</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0070 seconds] -->\r\n<p><code class=\"lang-python\"></code>当然，装饰器的优点就在于你可以在不重写函数的前提下，使用在几乎任何函数上。DRY（Don’t Repeat Yourself,不要重复你自己)，正如我说的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5cc19f5ec5f8d229162048\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">Python</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@counter\r\n@benchmark\r\n@logging\r\ndef get_random_futurama_quote():\r\n    from urllib import urlopen\r\n    result = urlopen('http://subfusion.net/cgi-bin/quote.pl?quote=futurama').read()\r\n    try:\r\n        value = result.split('&lt;br&gt;&lt;b&gt;&lt;hr&gt;&lt;br&gt;')[1].split('&lt;br&gt;&lt;br&gt;&lt;hr&gt;')[0]\r\n        return value.strip()\r\n    except:\r\n        return 'No, I’m ... doesn’t!'\r\n\r\n\r\nprint get_random_futurama_quote()\r\nprint get_random_futurama_quote()\r\n\r\n#outputs:\r\n#get_random_futurama_quote () {}\r\n#wrapper 0.02\r\n#wrapper has been used: 1x\r\n#The laws of science be a harsh mistress.\r\n#get_random_futurama_quote () {}\r\n#wrapper 0.01\r\n#wrapper has been used: 2x\r\n#Curse you, merciful Poseidon!</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5cc19f5ec5f8d229162048-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f8d229162048-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">counter</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f8d229162048-2\"><span class=\"crayon-sy\">@</span><span class=\"crayon-i\">benchmark</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f8d229162048-3\"><span class=\"crayon-sy\">@</span><span class=\"crayon-k \">logging</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f8d229162048-4\"><span class=\"crayon-r\">def</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_random_futurama_quote</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f8d229162048-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-k \">urllib</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">import</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">urlopen</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f8d229162048-6\"><span class=\"crayon-e\">    </span><span class=\"crayon-v\">result</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">urlopen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'http://subfusion.net/cgi-bin/quote.pl?quote=futurama'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">read</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f8d229162048-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">try</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f8d229162048-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">value</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">result</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'&lt;br&gt;&lt;b&gt;&lt;hr&gt;&lt;br&gt;'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'&lt;br&gt;&lt;br&gt;&lt;hr&gt;'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f8d229162048-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">strip</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f8d229162048-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">except</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f8d229162048-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'No, I’m ... doesn’t!'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f8d229162048-12\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f8d229162048-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f8d229162048-14\"><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_random_futurama_quote</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f8d229162048-15\"><span class=\"crayon-k \">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">get_random_futurama_quote</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f8d229162048-16\"> </div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f8d229162048-17\"><span class=\"crayon-c\">#outputs:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f8d229162048-18\"><span class=\"crayon-c\">#get_random_futurama_quote () {}</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f8d229162048-19\"><span class=\"crayon-c\">#wrapper 0.02</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f8d229162048-20\"><span class=\"crayon-c\">#wrapper has been used: 1x</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f8d229162048-21\"><span class=\"crayon-c\">#The laws of science be a harsh mistress.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f8d229162048-22\"><span class=\"crayon-c\">#get_random_futurama_quote () {}</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f8d229162048-23\"><span class=\"crayon-c\">#wrapper 0.01</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5cc19f5ec5f8d229162048-24\"><span class=\"crayon-c\">#wrapper has been used: 2x</span></div><div class=\"crayon-line\" id=\"crayon-5cc19f5ec5f8d229162048-25\"><span class=\"crayon-c\">#Curse you, merciful Poseidon!</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>Python 本身提供了几种装饰器： <code>property</code> ，<code>staticmethod</code>，等</p>\n<ul>\n<li>Django 使用装饰器来管理缓存，查看权限。</li>\n<li>Twisted 用它来伪造内联异步函数调用。</li>\n</ul>\n<p>装饰器的用途确实很广。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114694\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114694votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114694\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/q3057027161\">可乐</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/q3057027161\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/19D693E8F32E174301CF7B140001AB0F/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            本科在读，对python,linux,安全很感兴趣，希望能够阅读国外最新的技术新闻，也希望能够翻译一些文章帮助到别人        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/q3057027161\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/q3057027161/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/q3057027161/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 14</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://kele1997.xyz\"><i class=\"fa fa-link\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/kele1997\"><i class=\"fa fa-github\"></i></a> <a title=\"Twitter主页\" target=\"_blank\" href=\"https://twitter.com/cocakele1997\"><i class=\"fa fa-twitter\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/673dff809d96b0e9dfb79f3e3de437fe562abbcb.jpg"}